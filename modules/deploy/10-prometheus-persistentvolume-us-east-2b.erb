apiVersion: v1
kind: PersistentVolume
metadata:
  namespace: monitoring
  name: prometheus-us-east-2b-pv
  annotations:
<% if ENV["TF_VAR_cluster_name"].start_with? "stg." or ENV["TF_VAR_cluster_name"].start_with? "prd." %>
    backup.kubernetes.io/deltas: "PT15M PT60M PT4H PT24H"
<% else %>
    backup.kubernetes.io/deltas: "PT5M PT15M PT45M"
<% end %>
  labels:
    prometheus-pv: us-east-2
spec:
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  awsElasticBlockStore:
    volumeID: <%= @prereqs_output["prometheus_us-east-2b_volume_id"]["value"] %>
  storageClassName: gpii-default
