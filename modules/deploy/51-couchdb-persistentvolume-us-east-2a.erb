apiVersion: v1
kind: PersistentVolume
metadata:
  name: couchdb-us-east-2a-pv
  annotations:
  <% if ENV["TF_VAR_cluster_name"].start_with? "stg." %>
    backup.kubernetes.io/deltas: "PT15M PT60M PT4H PT24H PT7D"
  <% elsif ENV["TF_VAR_cluster_name"].start_with? "prd." %>
    backup.kubernetes.io/deltas: "PT5M PT60M PT24H PT7D PT52W"
  <% else %>
    backup.kubernetes.io/deltas: "PT5M PT15M PT45M"
  <% end %>
  labels:
    couchdb-pv: us-east
spec:
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  awsElasticBlockStore:
    volumeID: <%= @prereqs_output["couchdb_us-east-2a_volume_id"]["value"] %>
  storageClassName: gpii-default
